{% extends 'base.html.twig' %}

{% block title %}Accueil - Episciences Manager{% endblock %}

{% block body %}
    <div class="container review-container">
        <h1>{{ 'Welcome to Episciences manager'|trans }}</h1>
        <h2 class="review-title text-center">{{ 'Liste des revues'|trans }}</h2>

        {# Message de déconnexion avec auto-dismiss #}
        {% if logout_success %}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fa fa-check-circle me-2"></i>
                <strong>Déconnexion réussie !</strong> Vous êtes maintenant déconnecté(e) du système.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}

        {# Messages flash #}
        {% for message in app.flashes('logout_success') %}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fa fa-check-circle me-2"></i>
                <strong>{{ message }}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}

        {% if reviews is defined and reviews.items is not empty %}
            {# Affichage du total #}
            <div class="text-center mb-3">
                <span class="badge bg-primary">
                    {{ reviews.totalItemCount }} {{ 'revues au total'|trans }}
                </span>
            </div>

            {# Liste des revues #}
            <div class="list-group">
                {% for review in reviews %}
                    <a href="{{ review.url }}" class="list-group-item clearfix" target="_blank">
                        <img src="{{ review.logo }}" alt="Logo {{ review.code }}" class="review-logo">
                        <span class="review-name">{{ review.name }}</span>
                        <i class="fa fa-external-link review-link"></i>
                    </a>
                {% endfor %}
            </div>

            {# Pagination #}
            <div class="d-flex justify-content-center mt-4">
                {{ knp_pagination_render(reviews, '@KnpPaginator/Pagination/bootstrap_v5_pagination.html.twig') }}
            </div>

        {% else %}
            <div class="alert alert-info text-center">
                <i class="fa fa-info-circle"></i>
                {{ 'Aucune revue disponible pour le moment.'|trans }}
            </div>
        {% endif %}
    </div>
{% endblock %}
 {% block stylesheets %}
    {{ parent() }}
     {{ encore_entry_link_tags('index') }}
 {% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('home') }}
{% endblock %}